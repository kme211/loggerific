{% extends "base.html" %}

{% block content %}

<h1>{{sessions.length}} Sessions</h1>
<ul class="sessions__list">
    {% for session in sessions %}
    <li class={{"danger" if session.errors.length else "info"}}>
        <a href="/session/{{session.id}}">
            <div class="session__id">Session {{ loop.length - loop.index0 }} @ {{session.date}}</div>
            <div class="session__num-messages">{{session.numMessages}}</div>
        </a>
        {% for error in session.errors %}
        
        <a href="/session/{{session.id}}#line-{{error.line}}" class="error-preview">
        <span>Line {{error.line}}: {{ error.message }}</span>
        </a>
        {% endfor %}
    </li>
    {% endfor %}
</ul>

{% endblock %}